<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="jquery-3.4.1.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script
  src="https://code.jquery.com/jquery-3.5.0.js"
  integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc="
  crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/5679508c31.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.min.css">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FriendFinder</title>
</head>
<body>
    <div class ="container">
      <h2>Survey Questions!</h2>
      <hr>
      <h3><strong>About You!</strong></h3>
      <h4>Name (Required)</h4>
      <input type= "text" name="" id="name" class="form-control" required>

      <h4>Link to Photo Image (Required)</h4>
      <input type= "text" name="" id="photo" class="form-control" required>
      <hr>

    <h3><strong>Question 1!</strong></h3>
    <h4>Fishing counts as a hobby. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 2!</strong></h3>
<h4>Gun ownership is responsible. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 3!</strong></h3>
<h4>Marriage is between two consenting partners. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 4!</strong></h3>
<h4>The Sabbath is for resting. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 5!</strong></h3>
<h4>Politics should never be discussed. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 6!</strong></h3>
<h4>Church should be attended more than just holy days. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 7!</strong></h3>
<h4>Dogs are the best animals. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 8!</strong></h3>
<h4>Cats are the best animals. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 9!</strong></h3>
<h4>Ideally, children should be raised with two parents. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>

<h3><strong>Question 10!</strong></h3>
<h4>Ideally, one person in a relationship should work, and the other should stay home. Do you...</h4>
<select data-placeholder="" class="chosen-select" id="q1">
<option value= ""></option>
<option value= "1">Strongly Agree</option>
<option value= "2">Agree</option>
<option value= "3">Not sure</option>
<option value= "4">Disagree</option>
<option value= "5">Strongly Disagree</option>
</select>
<br>
<br>
<br>
<button type="submit" class="btn btn-danger btn-lg btn-block" id= "submit"><i class= "fa fa-check-circle" aria-hidden="true"></i>Submit!</button>

<footer class="footer">
        <div class="container">
            <p><a href="localhost:/8080/api/friends"></a>API Friends List</a> | <a href="https://github.com/justin1732/HW11FriendFinder">GitHub Repo</a></p>
        </div>
    </footer>
    </div>
<div id= "resultsModal" class="modal fade" role="dialog">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h2 class="modal-title"><strong>New Best Friend!</strong></h2>
</div>
<div class="modal-body">
    <h2 id="matchName"></h2>
    <img id="matchImg">
    </div>
    <div class="modal-footer">
        <button-type="button" class="btn btn-danger" data-dismiss="modal">Close</button-type>
    </div>
</div>
</div>
</div>
    <script type = "text/javascript">
        $("#submit").on("click", function () {
            var matchStatus = $('.modal-title');
            var modalBody =$('.modal-body');
        function validateForm() {
            var isValid= true;
            $(".form-control").each(function () {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            $(".chosen-select").each(function() {
                if ($(this).val() === "") {
                    isValid = false;
                }
            });
            return isValid;
        }
        
        if (validateForm()) {
            var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val(),
               ]
            };
            var currentURL = window.location.origin;
        

// $.ajax({
//     type: 'POST',
//     data:userData,
//     url:"/api/friends",
//     success: function (res){
//         $("#match-name").text(res.name);
//         $("#match-img").attr("src", res.photo);
//         $("#resultsModal").modal("toggle");
//     }
// })

            $.post(currentURL + "/api/friends", userData, function (data){
                if (data.name !== undefined){
                    matchStatus.html('Your new best friend...')
                    modalBody.html('<p>...is ' + data.name + '!</p><img src="' + data.photo + '" height="200">');
                }
                // $("match-img").attr("src", res.photo);
                $("#resultsModal").modal("toggle");
                // alert("working");
            });
        }
        else {
            alert ("Please fill out all forms before continuing!");
        }
        return false;
        });
        // $('#friend-form').reset();
        </script>    
</body>
</html>